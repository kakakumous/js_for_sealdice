# js_for_sealdice
为[海豹骰](https://github.com/sealdice/sealdice-core)编写的JavaScript扩展文件仓库。
## 已完成扩展
### 道具使用for商店系统（通用版）.js
【【【【【【测试中，欢迎在文件下留言反馈问题和bug。】】】】】】
</br>背包功能来自商店系统，使用的道具需在背包内持有，使用请确保安装依赖。
影响的变量为海豹骰支持的$m和$g型变量，利于与自定义回复的代码块部分进行交互。
#### 依赖文件：海豹_商店插件(v.1.0.0) by[步棋](https://github.com/Verplitic).js
#### 新增指令：
- .添加道具信息 <名称> <影响变量（例：$m金币，为#时表示不可被使用）> <影响变量参数（=+-*操作符开头，例：+1即为金币+1，支持%表达）> <描述> <使用回执> <是否限时（1是0否）> <保持时长(小时 限时为1时需>0)>//仅限骰主使用
- .删除道具信息 <名称> //仅限骰主使用 **将来也许会有的TODO:删除所有背包中的此物品**
- .展示道具 //展示所有道具简要信息，仅限骰主使用 
- .检索道具信息 <名称> //检索道具详细信息，仅限骰主使用
- .查看 <名称> //查看背包内已有物品的描述
- .使用 <名称> <数量（为空时默认为1）> <目标（at,为空时默认为自己）>//使用背包内已有物品 
#### 测试用指令（不推荐日常使用，涉嫌作弊）：
- .查看属性 <名称（例：$mHP）> <目标（at,为空时默认为自己）>
- .强制获取 <名称> <数量>  <目标（at,为空时默认为自己）>//向目标背包中塞入指定物品，仅限骰主使用
#### 详细解释 推荐骰主查看：
  是否限时这个参数为1还是0决定了这个道具的使用影响的是数值类变量还是状态类变量。
  </br>**在使用多个相同道具时，数值类变量堆叠数值，状态类变量堆叠持续时间。**
  </br>例：$m金币为数值类变量，若想使用一个金币袋获取10金币，应这样填写金币袋的信息
  ```
  .添加道具信息 小金币袋 $m金币 +10 一小袋金币。 你打开了这个小袋子，获取了10金币。//推荐的格式 非状态类变量可以省略后两个参数
  //是否限时默认装填的是0(默认为数值类)
  ```
  或者
  ```
  .添加道具信息 小金币袋 $m金币 +10//这是最简格式 描述和使用回执会被脚本内置的文本默认填充，
  //若不希望这个道具被使用，影响变量和影响变量参数请用#占位  
  ```
  在没有另外定义&初始化的情况下，当是否限时为0时，最大值为$m金币_MAX=-1（意为金币无上限，另外定义最大值请按此格式：变量名_MAX，可通过自定义回复代码块或js脚本操作），在影响变量参数带%表达时使用会被拦截，若不想麻烦请避免使用带%表达。
  </br>若定义了最大值，则可在影响变量参数中使用%表达。
  </br>例：$mHP为数值类变量，已有定义最大值$mHP_MAX=100,若想使用一个HP药水增加血量上限的50%HP，应写为
  ```
  .添加道具信息 HP药水 $mHP +50% 一瓶红色的药水。 你喝了下去，伤口开始自动愈合。
  ```
  当然，使用后的HP不会超过最大值，若希望道具使用后的值可以越界，可自行更改脚本中use方法的实现。
  </br>于状态类变量，其中存储的是此状态堆叠的层数，在没有另外定义&初始化的情况下，当是否限时为1时，最大值默认值为7（可更改脚本开头的变量INIT_MAX_STATUS）
  </br>例：$m运气等级为状态类变量，若想使用一个转运符使接下来的运气等级为1并持续12小时，应写为
  ```
  .添加道具信息 转运符 $m运气等级 =1 一块能让人变幸运的符文。 符文破碎了，你感觉会有什么好事发生。 1 12
  ```
  若有影响这个属性的其它因素导致$m运气等级_upTime大于当前时间，且新的层数小于旧层数，使用会被拦截。
